beautifulsoup4
lxml
requests
import streamlit as st
import requests
from bs4 import BeautifulSoup
import pandas as pd

# KBO íŒ€ ë¦¬ìŠ¤íŠ¸
teams = ["LG íŠ¸ìœˆìŠ¤", "KT ìœ„ì¦ˆ", "SSG ëœë”ìŠ¤", "NC ë‹¤ì´ë…¸ìŠ¤",
         "ë‘ì‚° ë² ì–´ìŠ¤", "ë¡¯ë° ìì´ì–¸ì¸ ", "KIA íƒ€ì´ê±°ì¦ˆ",
         "ì‚¼ì„± ë¼ì´ì˜¨ì¦ˆ", "í•œí™” ì´ê¸€ìŠ¤", "í‚¤ì›€ íˆì–´ë¡œì¦ˆ"]

st.title("âš¾ KBO íŒ€ ì •ë³´ ì¡°íšŒ")

# íŒ€ ì„ íƒ
team = st.selectbox("íŒ€ì„ ì„ íƒí•˜ì„¸ìš”:", teams)

# (ì˜ˆì‹œ) ë„¤ì´ë²„ ìŠ¤í¬ì¸ ì—ì„œ KBO ìˆœìœ„ í¬ë¡¤ë§
url = "https://sports.news.naver.com/kbaseball/record/index"
res = requests.get(url)
soup = BeautifulSoup(res.text, "html.parser")

# ìˆœìœ„í‘œ ê°€ì ¸ì˜¤ê¸°
table = soup.select_one("table")  
df = pd.read_html(str(table))[0]

# ì„ íƒí•œ íŒ€ ì •ë³´ ì°¾ê¸°
team_info = df[df["íŒ€ëª…"] == team]

if not team_info.empty:
    st.subheader(f"{team} ì •ë³´")
    ìŠ¹ë¥  = team_info["ìŠ¹ë¥ "].values[0]
    st.write(f"ğŸ“Š ìŠ¹ë¥ : {ìŠ¹ë¥ }")

# ìµœê·¼ ê²½ê¸° ê²°ê³¼ (ì˜ˆì‹œ: ë„¤ì´ë²„ ìŠ¤í¬ì¸  ê²½ê¸° ê²°ê³¼ í˜ì´ì§€)
game_url = "https://sports.news.naver.com/kbaseball/schedule/index"
res2 = requests.get(game_url)
soup2 = BeautifulSoup(res2.text, "html.parser")

# ê²½ê¸° ì¼ì • í¬ë¡¤ë§ (ë‹¨ìˆœ ì˜ˆì‹œ, ì‹¤ì œë¡œëŠ” ê²½ê¸° ê²°ê³¼ í˜ì´ì§€ êµ¬ì¡° ë¶„ì„ í•„ìš”)
games = soup2.select("div.sch_result")[:5]
recent_results = [g.text.strip() for g in games]

st.subheader("ğŸ“ ìµœê·¼ ê²½ê¸° ê²°ê³¼")
for r in recent_results:
    st.write(r)
